{"title":"Simple code with fs.promises and async await","description":"If you've spent some time with Node's fs API, you know how huge a pain its callback based pattern can get. Read out how to flatten your code using promises and async await syntax","date":"11 Jan 2021, 12:07 PM","cover_image":"media/fs-promise-requires.jpg","body":"<p><img src=\"\" alt=\"\" class=\"feature-image\" style=\"display: none;\"></p><div class=\"picture-container\">\n  <figure style=\"width: 100%;padding-top: 66.66666666666666%;background-color: rgb(40, 43, 52)\">\n    <picture>\n      <source type=\"image/webp\" media=\"(min-width: 501px)\" data-srcset=\"media/fs-promise-requires/large.webp\">\n      <source type=\"image/webp\" media=\"(max-width: 500px)\" data-srcset=\"media/fs-promise-requires/small.webp\">\n      <source type=\"image/jpg\" media=\"(min-width: 501px)\" data-srcset=\"media/fs-promise-requires/large.jpg\">\n      <source type=\"image/jpg\" media=\"(max-width: 500px)\" data-srcset=\"media/fs-promise-requires/small.jpg\">\n      <img alt=\"Placeholder\" data-src=\"media/fs-promise-requires/large.jpg\" class=\"lazyload blog-img\">\n    </picture>\n  </figure>\n  </div><p></p>\n<p>Hi! I see you have jumped onto my blog. Well, buckle up, this is gonna be one helluva ride!! We're gonna explore how to use the all-time favorite <mark>async / await</mark> feature with Node's Filesystem API.</p>\n<p>So now, let's make a super-simple program to read the username and password from a file, encrypt the password(Always do it, kids <img class=\"emoji\" draggable=\"false\" alt=\"ðŸ˜‰\" src=\"https://twemoji.maxcdn.com/v/13.0.1/svg/1f609.svg\">), and write the username and new password to some other file.</p>\n<p>So let's write up in plain english how our code works</p>\n<pre><code class=\"language-markdown\"><span class=\"hljs-number\">1.</span> Read <span class=\"hljs-keyword\">the</span> `user-data.json` <span class=\"hljs-built_in\">file</span>.\n<span class=\"hljs-number\">2.</span> Throw error <span class=\"hljs-keyword\">if</span> <span class=\"hljs-keyword\">any</span>.\n<span class=\"hljs-number\">3.</span> Extract `username`, `password` <span class=\"hljs-built_in\">from</span> <span class=\"hljs-keyword\">the</span> <span class=\"hljs-built_in\">file</span> contents.\n<span class=\"hljs-number\">4.</span> Encrypt <span class=\"hljs-keyword\">the</span> password.\n<span class=\"hljs-number\">5.</span> Assemble final data <span class=\"hljs-built_in\">to</span> be written <span class=\"hljs-keyword\">into</span> <span class=\"hljs-keyword\">the</span> <span class=\"hljs-built_in\">new</span> <span class=\"hljs-built_in\">file</span>.\n<span class=\"hljs-number\">6.</span> Write <span class=\"hljs-keyword\">the</span> data <span class=\"hljs-built_in\">to</span> <span class=\"hljs-keyword\">the</span> `user-data-final.json` <span class=\"hljs-built_in\">file</span>\n<span class=\"hljs-number\">7.</span> Throw error <span class=\"hljs-keyword\">if</span> <span class=\"hljs-keyword\">any</span>.\n<span class=\"hljs-number\">8.</span> Output <span class=\"hljs-keyword\">if</span> successful\n</code></pre>\n<p>Seems straightforward enough. So let's write it out in actual code.</p>\n<pre><code class=\"language-js\"><span class=\"hljs-keyword\">const</span> fs = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">'fs'</span>);\n\n<span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">main</span>(<span class=\"hljs-params\"></span>) </span>{\n  fs.readFile(<span class=\"hljs-string\">'user-data.json'</span>, <span class=\"hljs-function\">(<span class=\"hljs-params\">err, data</span>) =&gt;</span> {\n    <span class=\"hljs-keyword\">if</span> (err) <span class=\"hljs-keyword\">throw</span> err;\n\n    <span class=\"hljs-comment\">// Let's process the data</span>\n    <span class=\"hljs-keyword\">const</span> { username, password } = <span class=\"hljs-built_in\">JSON</span>.parse(data);\n\n    <span class=\"hljs-comment\">// Let's encrypt</span>\n    <span class=\"hljs-keyword\">const</span> encryptedPassword = encrypt(password);\n\n    <span class=\"hljs-keyword\">const</span> finalObject = { username, <span class=\"hljs-attr\">password</span>: encryptedPassword };\n\n    <span class=\"hljs-comment\">// Let's write it to another file</span>\n    fs.writeFile(<span class=\"hljs-string\">'user-data-final.json'</span>, <span class=\"hljs-built_in\">JSON</span>.stringify(finalObject), <span class=\"hljs-function\">(<span class=\"hljs-params\">err</span>) =&gt;</span> {\n      <span class=\"hljs-keyword\">if</span> (err) <span class=\"hljs-keyword\">throw</span> err;\n\n      <span class=\"hljs-built_in\">console</span>.log(<span class=\"hljs-string\">'Successful'</span>);\n    });\n  });\n}\n\n<span class=\"hljs-keyword\">try</span> {\n  main();\n} <span class=\"hljs-keyword\">catch</span> (e) {\n  <span class=\"hljs-built_in\">console</span>.error(e);\n}\n</code></pre>\n<p>We're just catching the errors and throwing them out to the console, in the last <code>try-catch</code> block.</p>\n<p>This seems to work.</p>\n<p>But something nags me here. Look at the steps I wrote out in plain english, and then look at the code. Plain english steps look very sequential, and step by step. Whereas the code we wrote, it <strong>is</strong> sequential, but it feels like all the steps live inside step 1, and step 7 and 8 live inside step 6. In short:</p>\n<pre><code class=\"language-txt\"><span class=\"hljs-number\">1</span>.\n  <span class=\"hljs-number\">2</span>.\n  <span class=\"hljs-number\">3</span>.\n  <span class=\"hljs-number\">4</span>.\n  <span class=\"hljs-number\">5</span>.\n  <span class=\"hljs-number\">6</span>.\n    <span class=\"hljs-number\">7</span>.\n    <span class=\"hljs-number\">8</span>.\n</code></pre>\n<p>Doesn't feel so idiomatic anymore, does it? It feels weird that all these steps in the code have to live <strong>inside</strong> of other steps, whereas in what we wrote, it feels idiomatic, like passing the torch in olympics(or in whatever events the torch is passed, I ain't a sports junkie <img class=\"emoji\" draggable=\"false\" alt=\"ðŸ˜\" src=\"https://twemoji.maxcdn.com/v/13.0.1/svg/1f601.svg\">).</p>\n<p>How can I make the code idiomatic, and mirror the steps it's based on?</p>\n<h1 id=\"Solution(s)\"><a class=\"heading-link\" href=\"blog/fs-promises#Solution(s)\">#</a>Solution(s)</h1>\n<p>Well, callback pattern can be replaced by using <code>async / await</code>. We can flatten our code a lot using them. But <code>await</code> works only with promises, ie.</p>\n<pre><code class=\"language-js\"><span class=\"hljs-keyword\">const</span> <span class=\"hljs-keyword\">result</span> = <span class=\"hljs-keyword\">await</span> fetch(<span class=\"hljs-string\">'https://api.example.com'</span>);\n</code></pre>\n<p><code>fetch</code> here returns a promise, so we can await the result. How do we promisify our <code>writeFile</code> and <code>readFile</code> methods then <img class=\"emoji\" draggable=\"false\" alt=\"ðŸ¤”\" src=\"https://twemoji.maxcdn.com/v/13.0.1/svg/1f914.svg\">?</p>\n<p>Well, look at this code below:</p>\n<pre><code class=\"language-js\">const readFile = <span class=\"hljs-function\"><span class=\"hljs-params\">(path)</span> =&gt;</span>\n  <span class=\"hljs-keyword\">new</span> <span class=\"hljs-built_in\">Promise</span>(<span class=\"hljs-function\"><span class=\"hljs-params\">(resolve, reject)</span> =&gt;</span>\n    fs.readFile(path, <span class=\"hljs-function\"><span class=\"hljs-params\">(err, data)</span> =&gt;</span> {\n      <span class=\"hljs-keyword\">if</span> (err) reject(err);\n\n      resolve(data);\n    })\n  );\n</code></pre>\n<p>This is a promise based implementation of the readFile function. We can use it as simply as this <img class=\"emoji\" draggable=\"false\" alt=\"ðŸ‘‡\" src=\"https://twemoji.maxcdn.com/v/13.0.1/svg/1f447.svg\"></p>\n<pre><code class=\"language-js\">const data = await read<span class=\"hljs-constructor\">File('<span class=\"hljs-params\">user</span>-<span class=\"hljs-params\">data</span>.<span class=\"hljs-params\">json</span>')</span>;\n</code></pre>\n<p>This will read the file, and move on to the next line after the data has come through. No indentation, no branching, nothing, Nada!! It looks good. So let's implement our complete code with this method.</p>\n<pre><code class=\"language-js\"><span class=\"hljs-keyword\">const</span> fs = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">'fs'</span>);\n\n<span class=\"hljs-keyword\">const</span> readFile = <span class=\"hljs-function\">(<span class=\"hljs-params\">path</span>) =&gt;</span>\n  <span class=\"hljs-keyword\">new</span> <span class=\"hljs-built_in\">Promise</span>(<span class=\"hljs-function\">(<span class=\"hljs-params\">resolve, reject</span>) =&gt;</span>\n    fs.readFile(path, <span class=\"hljs-function\">(<span class=\"hljs-params\">err, data</span>) =&gt;</span> {\n      <span class=\"hljs-keyword\">if</span> (err) reject(err);\n\n      resolve(data);\n    })\n  );\n\n<span class=\"hljs-keyword\">const</span> writeFile = <span class=\"hljs-function\">(<span class=\"hljs-params\">path, data</span>) =&gt;</span>\n  <span class=\"hljs-keyword\">new</span> <span class=\"hljs-built_in\">Promise</span>(<span class=\"hljs-function\">(<span class=\"hljs-params\">resolve, reject</span>) =&gt;</span>\n    fs.writeFile(path, data, <span class=\"hljs-function\">(<span class=\"hljs-params\">err</span>) =&gt;</span> {\n      <span class=\"hljs-keyword\">if</span> (err) reject(err);\n\n      resolve();\n    })\n  );\n\n<span class=\"hljs-keyword\">async</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">main</span>(<span class=\"hljs-params\"></span>) </span>{\n  <span class=\"hljs-keyword\">const</span> data = <span class=\"hljs-keyword\">await</span> readFile(<span class=\"hljs-string\">'user-data.json'</span>);\n\n  <span class=\"hljs-comment\">// Extract</span>\n  <span class=\"hljs-keyword\">const</span> { username, password } = <span class=\"hljs-built_in\">JSON</span>.parse(data);\n\n  <span class=\"hljs-comment\">// Let's encrypt</span>\n  <span class=\"hljs-keyword\">const</span> encryptedPassword = encrypt(password);\n\n  <span class=\"hljs-keyword\">const</span> finalObject = { username, <span class=\"hljs-attr\">password</span>: encryptedPassword };\n\n  <span class=\"hljs-comment\">// Let's write to another file</span>\n  <span class=\"hljs-keyword\">await</span> writeFile(<span class=\"hljs-string\">'user-data-final.json'</span>, <span class=\"hljs-built_in\">JSON</span>.stringify(finalObject));\n\n  <span class=\"hljs-built_in\">console</span>.log(<span class=\"hljs-string\">'Successful'</span>);\n}\n\n<span class=\"hljs-keyword\">try</span> {\n  main();\n} <span class=\"hljs-keyword\">catch</span> (e) {\n  <span class=\"hljs-built_in\">console</span>.error(e);\n}\n</code></pre>\n<p>Look at our main function here. The overall code is bigger, but our <code>main</code> function, which is the actual logic, is much more simpler and actually follows the steps we wrote, in the idiomatic way we imagined.</p>\n<h2 id=\"Simpler-way-(utils.promisify)...\"><a class=\"heading-link\" href=\"blog/fs-promises#Simpler-way-(utils.promisify)...\">#</a>Simpler way (utils.promisify)...</h2>\n<p>Our code above looks quite big, due to defining the promise-based versions of <code>writeFile</code> and <code>readFile</code>. We can make it much, much smaller by using a utility function exported by Node itself, <code>promisify</code>.</p>\n<p>Usage <img class=\"emoji\" draggable=\"false\" alt=\"ðŸ‘‡\" src=\"https://twemoji.maxcdn.com/v/13.0.1/svg/1f447.svg\"></p>\n<pre><code class=\"language-js\"><span class=\"hljs-keyword\">const</span> { promisify } = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">'util'</span>);\n<span class=\"hljs-keyword\">const</span> fs = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">'fs'</span>);\n\n<span class=\"hljs-keyword\">const</span> writeFile = promisify(fs.writeFile);\n</code></pre>\n<p>You simply pass the callback-based function to the <code>promisify</code> function, and voila! you have a promise-based version of your original function.</p>\n<p>So our code now becomes <img class=\"emoji\" draggable=\"false\" alt=\"ðŸ‘‡\" src=\"https://twemoji.maxcdn.com/v/13.0.1/svg/1f447.svg\"></p>\n<pre><code class=\"language-js\"><span class=\"hljs-keyword\">const</span> { promisify } = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">'util'</span>);\n<span class=\"hljs-keyword\">const</span> fs = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">'fs'</span>);\n\n<span class=\"hljs-keyword\">const</span> writeFile = promisify(fs.writeFile);\n<span class=\"hljs-keyword\">const</span> readFile = promisify(fs.readFile);\n\n<span class=\"hljs-keyword\">async</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">main</span>(<span class=\"hljs-params\"></span>) </span>{\n  <span class=\"hljs-keyword\">const</span> data = <span class=\"hljs-keyword\">await</span> readFile(<span class=\"hljs-string\">'user-data.json'</span>);\n\n  <span class=\"hljs-comment\">// Extract</span>\n  <span class=\"hljs-keyword\">const</span> { username, password } = <span class=\"hljs-built_in\">JSON</span>.parse(data);\n\n  <span class=\"hljs-comment\">// Let's encrypt</span>\n  <span class=\"hljs-keyword\">const</span> encryptedPassword = encrypt(password);\n\n  <span class=\"hljs-keyword\">const</span> finalObject = { username, <span class=\"hljs-attr\">password</span>: encryptedPassword };\n\n  <span class=\"hljs-comment\">// Let's write to another file</span>\n  <span class=\"hljs-keyword\">await</span> writeFile(<span class=\"hljs-string\">'user-data-final.json'</span>, <span class=\"hljs-built_in\">JSON</span>.stringify(finalObject));\n\n  <span class=\"hljs-built_in\">console</span>.log(<span class=\"hljs-string\">'Successful'</span>);\n}\n\n<span class=\"hljs-keyword\">try</span> {\n  main();\n} <span class=\"hljs-keyword\">catch</span> (e) {\n  <span class=\"hljs-built_in\">console</span>.error(e);\n}\n</code></pre>\n<p>So much smaller <img class=\"emoji\" draggable=\"false\" alt=\"ðŸ˜\" src=\"https://twemoji.maxcdn.com/v/13.0.1/svg/1f60d.svg\">.</p>\n<h2 id=\"...Simplest-Way!\"><a class=\"heading-link\" href=\"blog/fs-promises#...Simplest-Way!\">#</a>...Simplest Way!</h2>\n<p>Now lemme introduce you to the Ace in the sleeve! Since version 10, NodeJS exports promise based versions of its methods, <strong>by default</strong>. They can be accessed by <code>require('fs').promises</code>.</p>\n<p>Here's our final code using this approach:</p>\n<pre><code class=\"language-js\"><span class=\"hljs-keyword\">const</span> { writeFile, readFile } = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">'fs'</span>).promises;\n\n<span class=\"hljs-keyword\">async</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">main</span>(<span class=\"hljs-params\"></span>) </span>{\n  <span class=\"hljs-keyword\">const</span> data = <span class=\"hljs-keyword\">await</span> readFile(<span class=\"hljs-string\">'user-data.json'</span>);\n\n  <span class=\"hljs-comment\">// Extract</span>\n  <span class=\"hljs-keyword\">const</span> { username, password } = <span class=\"hljs-built_in\">JSON</span>.parse(data);\n\n  <span class=\"hljs-comment\">// Let's encrypt</span>\n  <span class=\"hljs-keyword\">const</span> encryptedPassword = encrypt(password);\n\n  <span class=\"hljs-keyword\">const</span> finalObject = { username, <span class=\"hljs-attr\">password</span>: encryptedPassword };\n\n  <span class=\"hljs-comment\">// Let's write to another file</span>\n  <span class=\"hljs-keyword\">await</span> writeFile(<span class=\"hljs-string\">'user-data-final.json'</span>, <span class=\"hljs-built_in\">JSON</span>.stringify(finalObject));\n\n  <span class=\"hljs-built_in\">console</span>.log(<span class=\"hljs-string\">'Successful'</span>);\n}\n\n<span class=\"hljs-keyword\">try</span> {\n  main();\n} <span class=\"hljs-keyword\">catch</span> (e) {\n  <span class=\"hljs-built_in\">console</span>.error(e);\n}\n</code></pre>\n<p>Notice the first line. We're directly importing the <code>writeFile</code> and <code>readFile</code> methods from <code>require(fs).promises</code>. This is the best and the cleanest version you can find in Node currently.</p>\n<h1 id=\"Code-Conventions\"><a class=\"heading-link\" href=\"blog/fs-promises#Code-Conventions\">#</a>Code Conventions</h1>\n<p>Now that you've seen how to use <code>fs.promises</code>, let's find out the best patterns to use this code.</p>\n<h2 id=\"Importing-individual-functions\"><a class=\"heading-link\" href=\"blog/fs-promises#Importing-individual-functions\">#</a>Importing individual functions</h2>\n<pre><code class=\"language-js\"><span class=\"hljs-keyword\">const</span> { writeFile, readFile, access } = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">'fs'</span>).promises;\n</code></pre>\n<p>This is probably the most convenient method, and the cleanest too. But the problem arises when you have to import something from regular <code>fs</code> module. For example <img class=\"emoji\" draggable=\"false\" alt=\"ðŸ‘‡\" src=\"https://twemoji.maxcdn.com/v/13.0.1/svg/1f447.svg\"></p>\n<pre><code class=\"language-js\"><span class=\"hljs-keyword\">const</span> { writeFile, readFile, access } = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">'fs'</span>).promises;\n<span class=\"hljs-keyword\">const</span> { writeFileSync, createReadStream, createWriteStream } = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">'fs'</span>);\n</code></pre>\n<p>We are importing the promise based functions, as well as some functions from regular <code>fs</code>, like streams. Now you can directly use it down in your main logic, but sometimes when the code in the file gets big enough, and I'm not exactly using await with the promise-based versions, it can get pretty confusing which method is coming from where, so I have to scroll all the way to the top to see the imports.</p>\n<p>This may not seem like a big problem, but I challenge you to write this code and comeback to it after 6 months. You'll be in the same dilemma <img class=\"emoji\" draggable=\"false\" alt=\"ðŸ˜‚\" src=\"https://twemoji.maxcdn.com/v/13.0.1/svg/1f602.svg\"></p>\n<h2 id=\"Importing-as-namespace\"><a class=\"heading-link\" href=\"blog/fs-promises#Importing-as-namespace\">#</a>Importing as namespace</h2>\n<p>This is my most preferred method.</p>\n<pre><code class=\"language-js\"><span class=\"hljs-keyword\">const</span> fs = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">'fs'</span>);\n<span class=\"hljs-keyword\">const</span> fsp = fs.promises; <span class=\"hljs-comment\">// <img class=\"emoji\" draggable=\"false\" alt=\"ðŸ‘ˆ\" src=\"https://twemoji.maxcdn.com/v/13.0.1/svg/1f448.svg\"> This line</span>\n\n...\n\n<span class=\"hljs-keyword\">await</span> fsp.writeFile();\n\nfs.createReadStream();\n</code></pre>\n<h2 id=\"ES-Imports\"><a class=\"heading-link\" href=\"blog/fs-promises#ES-Imports\">#</a>ES Imports</h2>\n<p>Now that we can use ES Imports in Node(with some extra tweaking), let's consider the Modular version</p>\n<pre><code class=\"language-js\"><span class=\"hljs-keyword\">import</span> { promises <span class=\"hljs-keyword\">as</span> fsp } <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">'fs'</span>;\n\n<span class=\"hljs-keyword\">async</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">main</span>(<span class=\"hljs-params\"></span>) </span>{\n  <span class=\"hljs-keyword\">const</span> data = <span class=\"hljs-keyword\">await</span> fsp.readFile(<span class=\"hljs-string\">'user-data.json'</span>);\n\n  <span class=\"hljs-comment\">// Extract</span>\n  <span class=\"hljs-keyword\">const</span> { username, password } = <span class=\"hljs-built_in\">JSON</span>.parse(data);\n\n  <span class=\"hljs-comment\">// Let's encrypt</span>\n  <span class=\"hljs-keyword\">const</span> encryptedPassword = encrypt(password);\n\n  <span class=\"hljs-keyword\">const</span> finalObject = { username, <span class=\"hljs-attr\">password</span>: encryptedPassword };\n\n  <span class=\"hljs-comment\">// Let's write to another file</span>\n  <span class=\"hljs-keyword\">await</span> fsp.writeFile(<span class=\"hljs-string\">'user-data-final.json'</span>, <span class=\"hljs-built_in\">JSON</span>.stringify(finalObject));\n\n  <span class=\"hljs-built_in\">console</span>.log(<span class=\"hljs-string\">'Successful'</span>);\n}\n\n<span class=\"hljs-keyword\">try</span> {\n  main();\n} <span class=\"hljs-keyword\">catch</span> (e) {\n  <span class=\"hljs-built_in\">console</span>.error(e);\n}\n</code></pre>\n<p>Also, if your node version is more than <mark>v14.8.0</mark>, you can also directly use top level await (I have an article about it, <a href=\"https://puruvj.dev/blog/top-level-await\" target=\"_blank\" rel=\"noopener\">right here</a>).</p>\n<pre><code class=\"language-js\"><span class=\"hljs-keyword\">import</span> { promises <span class=\"hljs-keyword\">as</span> fsp } <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">'fs'</span>;\n\n<span class=\"hljs-keyword\">try</span> {\n  <span class=\"hljs-keyword\">const</span> data = <span class=\"hljs-keyword\">await</span> fsp.readFile(<span class=\"hljs-string\">'user-data.json'</span>);\n\n  <span class=\"hljs-comment\">// Extract</span>\n  <span class=\"hljs-keyword\">const</span> { username, password } = <span class=\"hljs-built_in\">JSON</span>.parse(data);\n\n  <span class=\"hljs-comment\">// Let's encrypt</span>\n  <span class=\"hljs-keyword\">const</span> encryptedPassword = encrypt(password);\n\n  <span class=\"hljs-keyword\">const</span> finalObject = { username, <span class=\"hljs-attr\">password</span>: encryptedPassword };\n\n  <span class=\"hljs-comment\">// Let's write to another file</span>\n  <span class=\"hljs-keyword\">await</span> fsp.writeFile(<span class=\"hljs-string\">'user-data-final.json'</span>, <span class=\"hljs-built_in\">JSON</span>.stringify(finalObject));\n\n  <span class=\"hljs-built_in\">console</span>.log(<span class=\"hljs-string\">'Successful'</span>);\n} <span class=\"hljs-keyword\">catch</span> (e) {\n  <span class=\"hljs-built_in\">console</span>.error(e);\n}\n</code></pre>\n<p>Even smaller!!!</p>\n<h1 id=\"Conclusion\"><a class=\"heading-link\" href=\"blog/fs-promises#Conclusion\">#</a>Conclusion</h1>\n<p>Hope you got some good insights from this blog post.</p>\n","id":"fs-promises","reading_time":4.265}