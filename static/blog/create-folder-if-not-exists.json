{"title":"NodeJS Create folder if not exists in 3 lines - No dependencies","description":"The simplest and dependency-free way to create a folder in NodeJS if it doesn't exist","date":"18 Jan, 2021 2:38 AM","cover_image":"media/blog-social-intro.png","body":"<p>Here's a very simple trick to create a folder if it doesn't exists (Or ensure if a folder exists) in NodeJS. <strong>Just 3 lines, no dependencies</strong></p>\n<h1 id=\"Minimum-requirements\"><a class=\"heading-link\" href=\"blog/create-folder-if-not-exists#Minimum-requirements\">#</a>Minimum requirements</h1>\n<ol>\n<li>NodeJS &gt;= v10 LTS.</li>\n<li>Working knowledge of <code>promises</code> and <code>async await</code>.</li>\n</ol>\n<p>That's it <img class=\"emoji\" draggable=\"false\" alt=\"ðŸ˜Š\" src=\"https://twemoji.maxcdn.com/v/13.0.1/svg/1f60a.svg\"></p>\n<h1 id=\"TLDR-Code:\"><a class=\"heading-link\" href=\"blog/create-folder-if-not-exists#TLDR-Code:\">#</a>TLDR Code:</h1>\n<pre><code class=\"language-js\"><span class=\"hljs-keyword\">const</span> { mkdir } = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">'fs'</span>).promises;\n\n<span class=\"hljs-keyword\">try</span> {\n  <span class=\"hljs-keyword\">await</span> mkdir(<span class=\"hljs-string\">'folderPath'</span>);\n} <span class=\"hljs-keyword\">catch</span> (e) {}\n</code></pre>\n<h1 id=\"Explanation\"><a class=\"heading-link\" href=\"blog/create-folder-if-not-exists#Explanation\">#</a>Explanation</h1>\n<ol>\n<li>\n<p>We import promise-based version of mkdir from <code>fs.promises</code>. Read my article about <a href=\"https://puruvj.dev/blog/fs-promises\" target=\"_blank\" rel=\"noopener\">Simple code with fs.promises and async await</a>.</p>\n</li>\n<li>\n<p>We actually create the folder with the <code>await mkdir('folderPath')</code>.</p>\n</li>\n</ol>\n<blockquote>\n<p>Note: We are using an await here, so it's necessary for this code to be in an async function, or you can also use the <mark>Top Level Await</mark> feature in NodeJS &gt;= 14.8.0. Read my article about why <a href=\"https://puruvj.dev/blog/top-level-await\" target=\"_blank\" rel=\"noopener\">Top level Await is AWESOME!! <img class=\"emoji\" draggable=\"false\" alt=\"ðŸ˜\" src=\"https://twemoji.maxcdn.com/v/13.0.1/svg/1f60d.svg\"></a></p>\n</blockquote>\n<h2 id=\"Why-wrap-it-in-try-catch\"><a class=\"heading-link\" href=\"blog/create-folder-if-not-exists#Why-wrap-it-in-try-catch\">#</a>Why wrap it in try-catch?</h2>\n<p>Remember: We're trying to create a folder if it doesn't exists. That means there's a fair chance it may already exists, in which case mkdir will throw an error, and will stop the rest of code from executing. We don't want that now, do we? <img class=\"emoji\" draggable=\"false\" alt=\"ðŸ˜‰\" src=\"https://twemoji.maxcdn.com/v/13.0.1/svg/1f609.svg\"></p>\n<p>So if <code>mkdir</code> works perfectly, good, means the folder didn't exist, so it was created. But if it throws error, try catch will simply catch the error, ignore it, and move on to the rest of the code.</p>\n<p>Simple!</p>\n<h1 id=\"As-a-utility-function\"><a class=\"heading-link\" href=\"blog/create-folder-if-not-exists#As-a-utility-function\">#</a>As a utility function</h1>\n<p>Make this snippet part of your utility belt <img class=\"emoji\" draggable=\"false\" alt=\"ðŸ‘‡\" src=\"https://twemoji.maxcdn.com/v/13.0.1/svg/1f447.svg\"></p>\n<pre><code class=\"language-js\"><span class=\"hljs-comment\">/**\n * Ensure that a folder exists\n * <span class=\"hljs-doctag\">@param <span class=\"hljs-type\">{string}</span> <span class=\"hljs-variable\">folderPath</span></span>\n */</span>\n<span class=\"hljs-keyword\">async</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">ensureFolder</span>(<span class=\"hljs-params\">folderPath</span>) </span>{\n  <span class=\"hljs-keyword\">try</span> {\n    <span class=\"hljs-keyword\">await</span> mkdir(folderPath);\n  } <span class=\"hljs-keyword\">catch</span> (e) {}\n}\n</code></pre>\n<p>Hope it helped!</p>\n","id":"create-folder-if-not-exists","reading_time":0.83}